# Data Model: Secured Todo API

## Task Entity

### Fields
- **id** (Integer, Primary Key, Auto-increment)
  - Unique identifier for each task
  - Auto-generated by the database
  - Required for all operations

- **title** (String, Required)
  - Title or brief description of the task
  - Maximum length: 255 characters
  - Cannot be null or empty

- **description** (String, Optional)
  - Detailed description of the task
  - Maximum length: 1000 characters
  - Can be null if not provided

- **completed** (Boolean)
  - Status indicating if the task is completed
  - Default value: false
  - Used for toggling task completion status

- **user_id** (Integer, Foreign Key, Required)
  - References the user who owns this task
  - Ensures user isolation - users can only access their own tasks
  - Links to the user ID from Better Auth

- **created_at** (DateTime, Required)
  - Timestamp when the task was created
  - Automatically set when record is created
  - Used for sorting and tracking

- **updated_at** (DateTime, Required)
  - Timestamp when the task was last updated
  - Automatically updated when record is modified
  - Used for tracking changes

### Relationships
- **Task â†’ User** (Many-to-One)
  - Each task belongs to one user
  - User can have multiple tasks
  - Foreign key constraint on user_id field

### Validation Rules
- Title must be provided and not empty
- Title must not exceed 255 characters
- Description, if provided, must not exceed 1000 characters
- user_id must reference an existing user
- created_at and updated_at are automatically managed by the system
- completed field defaults to false when creating new tasks

### State Transitions
- New task: completed = false (default)
- Task completion: completed = true (via PATCH /complete endpoint)
- Task reversion: completed = false (via PATCH /complete endpoint)

## API Request/Response Models

### CreateTaskRequest
- title (String, Required) - Task title
- description (String, Optional) - Task description

### UpdateTaskRequest
- title (String, Optional) - Updated task title
- description (String, Optional) - Updated task description

### TaskResponse
- id (Integer) - Task unique identifier
- title (String) - Task title
- description (String) - Task description
- completed (Boolean) - Completion status
- user_id (Integer) - Owner user ID
- created_at (DateTime) - Creation timestamp
- updated_at (DateTime) - Last update timestamp

### TaskListResponse
- tasks (Array of TaskResponse) - List of user's tasks
- count (Integer) - Total number of tasks for the user
